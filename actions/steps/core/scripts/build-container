#!/usr/bin/env bash

# This file is automatically generated by the Nebula SDK. DO NOT EDIT.

set -euo pipefail

#
# Commands
#

DOCKER="${DOCKER:-docker}"

#
# Variables
#

DOCKER_ARGS="${DOCKER_ARGS:-}"
DOCKER_BUILD_ARGS="${DOCKER_BUILD_ARGS:-}"

#
#
#

declare -a TAGS

while getopts ':t:' OPTNAME; do
  case "${OPTNAME}" in
  t)
    TAGS+=( "${OPTARG}" )
    ;;
  \?)
    echo "Unrecognized option: -${OPTARG}" >&2
    exit 1
    ;;
  esac
done

shift $(( OPTIND - 1 ))


$DOCKER $DOCKER_ARGS build $DOCKER_BUILD_ARGS --tag sdk.nebula.localhost/intermediate/3d15fdaec05a/core --file Dockerfile .
$DOCKER $DOCKER_ARGS build $DOCKER_BUILD_ARGS --tag sdk.nebula.localhost/intermediate/3d15fdaec05a/core-python --file Dockerfile.python .

for TAG in ${TAGS[@]+"${TAGS[@]}"}; do
  $DOCKER $DOCKER_ARGS tag sdk.nebula.localhost/intermediate/3d15fdaec05a/core "projectnebula/core:${TAG}" && \
    printf "# Tagged %s:%s\n" projectnebula/core "${TAG}"
  $DOCKER $DOCKER_ARGS tag sdk.nebula.localhost/intermediate/3d15fdaec05a/core-python "projectnebula/core:${TAG}-python" && \
    printf "# Tagged %s:%s\n" projectnebula/core "${TAG}-python"
done
